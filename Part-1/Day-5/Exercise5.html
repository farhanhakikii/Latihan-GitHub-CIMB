<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
    let dataorg = [
    {
        buah: 'Mangga',
        stok: 100,
        harga: 7000,
        qty: 0
    },{
        buah: 'Jeruk',
        stok: 300,
        harga: 3000,
        qty: 0
    },{
        buah: 'Pisang',
        stok: 200,
        harga: 5000,
        qty: 0
    }]
    let ulang

    do{
        let menu = ''
        menu = `Daftar Menu:\n`
        for(i = 0; i < dataorg.length; i++){
            menu += `${i+1}. ${dataorg[i].buah} Rp.${dataorg[i].harga}/pcs. Stok tersedia ${dataorg[i].stok}.\n`
        }
        menu += `${dataorg.length+1}. Checkout`
        daftmenu = parseInt(prompt(menu))
        index = daftmenu - 1
        if(daftmenu == dataorg.length+1){
            totalprice = 0
            for(i = 0; i < dataorg.length; i++){
                totalprice += dataorg[i].harga*dataorg[i].qty
            }
                checkout = `Daftar Belanjaan Anda :\nNo.\tItem\tJumlah\n`
                count = 1
                for(i = 0;i < dataorg.length; i++){
                    checkout += `${count}\t${dataorg[i].buah}\t${dataorg[i].qty}\n`
                    count += 1
                }
                checkout += `Total Pembelian Rp.${totalprice}\n`
                keranjang = parseInt(confirm(checkout))
                if(keranjang == true){
                    ulang = false
                }else{
                    ulang = true
                }                
            do{ 

                bayar = parseInt(prompt(`Total Belanja Anda ${totalprice}\nSilahkan Masukkan Uang Anda`))
                if(bayar > totalprice){
                    alert(`Kembalian anda ${bayar - totalprice}`)
                    ulang = false
                }else if(bayar == totalprice){
                    alert(`Terimakasih sudah membayar dengan uang pas.`)
                    ulang = false
                }else{
                    alert(`Uang anda kurang ${totalprice - bayar}`)
                    ulang = true
                }
            }while(ulang == true)

            for (i = 0; i < dataorg.length; i++) {
            dataorg[i].stok -= dataorg[i].qty
            dataorg[i].qty = 0
            }
            ulang = confirm('Mau Belanja Lagi?')

        }else{
            do{
            inputan = parseInt(prompt(`Mau beli berapa ${dataorg[index].buah}`))
            if(inputan > dataorg[index].stok || inputan < 0){
                alert(`Stok ${dataorg[index].buah} tidak cukup atau anda memasukkan angka yang salah.`)
                ulang = true
            }else{
                dataorg[index].qty += inputan
                ulang = false
                 }
            }while(ulang == true)
            ulang = true
        }
    }while(ulang == true)
    </script>
</body>
</html>
